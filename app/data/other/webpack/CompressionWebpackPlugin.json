{"sta":1,"data":{"subTitle":"打成gz包(CompressionWebpackPlugin)","content":"<h3 id=\"CompressionWebpackPlugin\">CompressionWebpackPlugin</h3><h3 id=\"用法\">用法</h3><pre><code><span>var</span> CompressionPlugin <span>=</span> <span>require</span><span>(</span><span>\"compression-webpack-plugin\"</span><span>)</span><span>;</span>\nmodule<span>.</span>exports <span>=</span> <span>{</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>CompressionPlugin</span><span>(</span><span>{</span>\n            asset<span>:</span> <span>\"[path].gz[query]\"</span><span>,</span>\n            algorithm<span>:</span> <span>\"gzip\"</span><span>,</span>\n            test<span>:</span> <span>/\\.js$|\\.html$/</span><span>,</span>\n            threshold<span>:</span> <span>10240</span><span>,</span>\n            minRatio<span>:</span> <span>0.8</span>\n        <span>}</span><span>)</span>\n    <span>]</span>\n<span>}</span>\n</code></pre><h3>参数：</h3><ul><li><code>asset</code>： 目标资源名称。<span>&nbsp;</span><code>[file]</code><span>&nbsp;</span>会被替换成原始资源。<code>[path]</code><span>&nbsp;</span>会被替换成原始资源的路径，<span>&nbsp;</span><code>[query]</code><span>&nbsp;</span>会被替换成查询字符串。默认值是<span>&nbsp;</span><code>\"[path].gz[query]\"</code>。</li><li><code>algorithm</code>： 可以是<span>&nbsp;</span><code>function(buf, callback)</code><span>&nbsp;</span>或者字符串。对于字符串来说依照<span>&nbsp;</span><code>zlib</code><span>&nbsp;</span>的算法(或者<span>&nbsp;</span><code>zopfli</code><span>&nbsp;</span>的算法)。默认值是<span>&nbsp;</span><code>\"gzip\"</code>。</li><li><code>test</code>： 所有匹配该正则的资源都会被处理。默认值是全部资源。</li><li><code>threshold</code>： 只有大小大于该值的资源会被处理。单位是 bytes。默认值是<span>&nbsp;</span><code>0</code>。</li><li><code>minRatio</code>： 只有压缩率小于这个值的资源才会被处理。默认值是<span>&nbsp;</span><code>0.8</code>。</li></ul><p>Zopfli 的参数选项 (详情请查看<span>&nbsp;</span><a href=\"https://github.com/pierreinglebert/node-zopfli#options\" target=\"_blank\">node-zopfli</a><span>&nbsp;</span>文档)：</p><ul><li>verbose: Default: false,</li><li>verbose_more: Default: false,</li><li>numiterations: Default: 15,</li><li>blocksplitting: Default: true,</li><li>blocksplittinglast: Default: false,</li><li>blocksplittingmax: Default: 15</li></ul>"}}