{"sta":1,"data":{"subTitle":"取消已缓存的内容(reset HEAD)","content":"<h3>git reset HEAD</h3><p>git reset HEAD 命令用于取消已缓存的内容。</p><p>我们先改动文件 README 文件，内容如下：</p><pre><span># Runoob Git 测试</span><span>\n</span><span># 菜鸟教程 </span></pre><p>hello.php 文件修改为：</p><pre><span>&lt;?</span><span>php\necho </span><span>'菜鸟教程：www.runoob.com'</span><span>;</span><span>\necho </span><span>'菜鸟教程：www.runoob.com'</span><span>;</span><span>\necho </span><span>'菜鸟教程：www.runoob.com'</span><span>;</span><span>\n</span><span>?&gt;</span></pre><p>现在两个文件修改后，都提交到了缓存区，我们现在要取消其中一个的缓存，操作如下：</p><pre><span>$ git status </span><span>-</span><span>s\n M README\n M hello</span><span>.</span><span>php\n$ git add </span><span>.</span><span>\n$ git status </span><span>-</span><span>s\nM  README\nM  hello</span><span>.</span><span>pp\n$ git reset HEAD </span><span>--</span><span> hello</span><span>.</span><span>php \n</span><span>Unstaged</span><span> changes after reset</span><span>:</span><span>\nM&nbsp;&nbsp;&nbsp;&nbsp;hello</span><span>.</span><span>php\n$ git status </span><span>-</span><span>s\nM  README\n M hello</span><span>.</span><span>php</span></pre><p>现在你执行 git commit，只会将 README 文件的改动提交，而 hello.php 是没有的。</p><pre><span>$ git commit </span><span>-</span><span>m </span><span>'修改'</span><span>\n</span><span>[</span><span>master f50cfda</span><span>]</span><span> </span><span>修改</span><span>\n </span><span>1</span><span> file changed</span><span>,</span><span> </span><span>1</span><span> insertion</span><span>(+)</span><span>\n$ git status </span><span>-</span><span>s\n M hello</span><span>.</span><span>php</span></pre><p>可以看到 hello.php 文件的修改并为提交。</p><p>这时我们可以使用以下命令将 hello.php 的修改提交：</p><pre><span>$ git commit </span><span>-</span><span>am </span><span>'修改 hello.php 文件'</span><span>\n</span><span>[</span><span>master </span><span>760f74d</span><span>]</span><span> </span><span>修改</span><span> hello</span><span>.</span><span>php </span><span>文件</span><span>\n </span><span>1</span><span> file changed</span><span>,</span><span> </span><span>1</span><span> insertion</span><span>(+)</span><span>\n$ git status\n</span><span>On</span><span> branch master\nnothing to commit</span><span>,</span><span> working directory clean</span></pre><p></p><p>简而言之，执行 git reset HEAD 以取消之前 git add 添加，但不希望包含在下一提交快照中的缓存。</p>"}}