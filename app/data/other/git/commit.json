{"sta":1,"data":{"subTitle":"将缓存区内容添加到仓库(commit)","content":"<h3>git commit</h3><p>使用 git add 命令将想要快照的内容写入缓存区， 而执行 git commit 将缓存区内容添加到仓库中。</p><p>Git 为你的每一个提交都记录你的名字与电子邮箱地址，所以第一步需要配置用户名和邮箱地址。</p><pre><span>$ git config </span><span>--</span><span>global</span><span> user</span><span>.</span><span>name </span><span>'runoob'</span><span>\n$ git config </span><span>--</span><span>global</span><span> user</span><span>.</span><span>email test@runoob</span><span>.</span><span>com</span></pre><p>接下来我们写入缓存，并提交对 hello.php 的所有改动。在首个例子中，我们使用 -m 选项以在命令行中提供提交注释。</p><pre><span>$ git add hello</span><span>.</span><span>php\n$ git status </span><span>-</span><span>s\nA  README\nA  hello</span><span>.</span><span>php\n$ $ git commit </span><span>-</span><span>m </span><span>'第一次版本提交'</span><span>\n</span><span>[</span><span>master </span><span>(</span><span>root</span><span>-</span><span>commit</span><span>)</span><span> d32cf1f</span><span>]</span><span> </span><span>第一次版本提交</span><span>\n </span><span>2</span><span> files changed</span><span>,</span><span> </span><span>4</span><span> insertions</span><span>(+)</span><span>\n create mode </span><span>100644</span><span> README\n create mode </span><span>100644</span><span> hello</span><span>.</span><span>php\n </span></pre><p>现在我们已经记录了快照。如果我们再执行 git status:</p><pre><span>$ git status\n</span><span># On branch master</span><span>\nnothing to commit </span><span>(</span><span>working directory clean</span><span>)</span></pre><p>以上输出说明我们在最近一次提交之后，没有做任何改动，是一个\"working directory clean：干净的工作目录\"。</p><p>如果你没有设置 -m 选项，Git 会尝试为你打开一个编辑器以填写提交信息。 如果 Git 在你对它的配置中找不到相关信息，默认会打开 vim。屏幕会像这样：</p><pre><span># Please enter the commit message for your changes. Lines starting</span><span>\n</span><span># with '#' will be ignored, and an empty message aborts the commit.</span><span>\n</span><span># On branch master</span><span>\n</span><span># Changes to be committed:</span><span>\n</span><span>#   (use \"git reset HEAD &lt;file&gt;...\" to unstage)</span><span>\n</span><span>#</span><span>\n</span><span># modified:   hello.php</span><span>\n</span><span>#</span><span>\n</span><span>~</span><span>\n</span><span>~</span><span>\n</span><span>\".git/COMMIT_EDITMSG\"</span><span> </span><span>9L</span><span>,</span><span> </span><span>257C</span></pre><p>如果你觉得 git add 提交缓存的流程太过繁琐，Git 也允许你用 -a 选项跳过这一步。命令格式如下：</p><pre><span>git commit </span><span>-</span><span>a</span></pre><p>我们先修改 hello.php 文件为以下内容：</p><pre><span>&lt;?</span><span>php\necho </span><span>'菜鸟教程：www.runoob.com'</span><span>;</span><span>\necho </span><span>'菜鸟教程：www.runoob.com'</span><span>;</span><span>\n</span><span>?&gt;</span></pre><p>再执行以下命令：</p><pre><span>git commit </span><span>-</span><span>am </span><span>'修改 hello.php 文件'</span><span>\n</span><span>[</span><span>master </span><span>71ee2cb</span><span>]</span><span> </span><span>修改</span><span> hello</span><span>.</span><span>php </span><span>文件</span><span>\n </span><span>1</span><span> file changed</span><span>,</span><span> </span><span>1</span><span> insertion</span><span>(+)</span></pre>"}}