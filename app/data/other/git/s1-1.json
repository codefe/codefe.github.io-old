{"sta":1,"data":{"subTitle":"使用web storage代替cookie","content":"<p>cookie最大的缺陷是在每一次HTTP请求中都会携带所有符合规则的cookie数据.这会增加请求响应时间,特别是XHR请求. 在HTML5中使用<code>sessionStorage</code>和<code>localStorage</code>代替cookie是更好的做法.</p><p>这另种方法可以将数据永久或者以session时间存储在用户本地.数据不会随着HTTP请求传递.所以我们优先使用web storage,仅仅使用cookie作为替代方案.</p><pre><code>// if localStorage is present, use that\nif (('localStorage' in window) &amp;&amp; window.localStorage !== null) {\n\n  // easy object property API\n  localStorage.wishlist = '[\"unicorn\", \"Narwhal\", \"deathbear\"]';\n\n} else {\n\n  // without sessionStorage we'll have to use a far-future cookie\n  // with document.cookie's awkward API\n  var date = new Date();\n  date.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n  var expires = date.toGMTString();\n  var cookiestr = 'wishlist=[\"unicorn\", \"Narwhal\", \"deathbear\"];' +\n                  ' expires=' + expires + '; path=/';\n  document.cookie = cookiestr;\n}</code></pre>"}}