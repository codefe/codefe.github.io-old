{"sta":1,"data":{"subTitle":"使用bind函数解决回调函数对this的影响","content":"<h3><strong>错误示例</strong></h3><pre><span>&lt;script</span><span> </span><span>type</span><span>=</span><span>\"text/javascript\"</span><span>&gt;</span><span>\n</span><span>function</span><span> foo</span><span>(</span><span>name</span><span>){</span><span>\n </span><span>this</span><span>.</span><span>a </span><span>=</span><span> </span><span>1</span><span>;</span><span>\n </span><span>this</span><span>.</span><span>say </span><span>=</span><span> </span><span>function</span><span>(){</span><span>\n  setTimeout</span><span>(</span><span>function</span><span>(){</span><span>\n   console</span><span>.</span><span>log</span><span>(</span><span>this</span><span>.</span><span>a</span><span>);</span><span>\n  </span><span>},</span><span>1000</span><span>);</span><span>\n </span><span>}</span><span>\n</span><span>}</span><span>\n</span><span>var</span><span> obj </span><span>=</span><span> </span><span>new</span><span> foo</span><span>();</span><span>\nobj</span><span>.</span><span>say</span><span>();</span><span>\n</span><span>&lt;/script&gt;</span></pre><p>上面代码中 this 在 setTimeout()中被调用，怎不能再代表 obj 对象。解决方案<strong><span>&nbsp;</span>.bind()</strong>：</p><pre><span>&lt;script</span><span> </span><span>type</span><span>=</span><span>\"text/javascript\"</span><span>&gt;</span><span>\n</span><span>function</span><span> foo</span><span>(</span><span>name</span><span>){</span><span>\n </span><span>this</span><span>.</span><span>a </span><span>=</span><span> </span><span>1</span><span>;</span><span>\n </span><span>this</span><span>.</span><span>say </span><span>=</span><span> </span><span>function</span><span>(){</span><span>\n  setTimeout</span><span>(</span><span>function</span><span>(){</span><span>\n   console</span><span>.</span><span>log</span><span>(</span><span>this</span><span>.</span><span>a</span><span>);</span><span>\n  </span><span>}.</span><span>bind</span><span>(</span><span>this</span><span>),</span><span>1000</span><span>);</span><span>\n </span><span>}</span><span>\n</span><span>}</span><span>\n</span><span>var</span><span> obj </span><span>=</span><span> </span><span>new</span><span> foo</span><span>();</span><span>\nobj</span><span>.</span><span>say</span><span>();</span><span>\n</span><span>&lt;/script&gt;</span></pre><p></p><p>在this所在的函数结尾使用bind()函数绑定this所指向的对象可以更精准的控制this。</p>"}}