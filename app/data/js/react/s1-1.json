{"sta":1,"data":{"subTitle":"react中按钮点击之后禁止再次点击","content":"<p>点击按钮请求ajax,如果成功则按钮不能再点击并变灰色。这样做是为了防止重复点击，在react中该怎么写呢？<br></p><pre><code>import React from 'react'\n\nclass AppTest2 extends React.Component {\n  constructor() {\n    super()\n\n    this.state = { isClickable: true }\n  }\n\n  handleButtonClickTest = (e) =&gt; {\n    this.setState({ isClickable: false })\n\n    const promise = new Promise((resolve, reject) =&gt; {\n      setTimeout(resolve, 3000)\n    })\n\n    promise.then(() =&gt; {\n      this.setState({ isClickable: true })\n    })\n  }\n\n  handleButtonClick = (e) =&gt; {\n    // 按钮为不可点按状态\n    this.setState({ isClickable: false })\n\n    fetch('http://localhost:8888/items', {\n      method: 'GET'\n    })\n    .then((response) =&gt; {\n      // ok 代表状态码在 200-299\n      if (!response.ok) throw new Error(response.statusText)\n      return response.json()\n    })\n    .then((items) =&gt; {\n      // 载入数据\n      // this.setState({items})\n\n      // 回复按钮可被点按状态\n      this.setState({ isClickable: true })\n    })\n    .catch((error) =&gt; {\n      // 回复按钮可被点按状态\n      this.setState({ isClickable: true })\n      // 异常处理\n      console.error(error)\n    })\n  }\n\n  render() {\n    return (\n      &lt;button\n        onClick={this.handleButtonClickTest}\n        disabled={!this.state.isClickable}\n        &gt;\n        {this.state.isClickable ? '点按送出AJAX' : '正在处理中...'}\n      &lt;/button&gt;\n    )\n  }\n}\n\nexport default AppTest2</code></pre><p><br></p>"}}