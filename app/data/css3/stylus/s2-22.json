{"sta":1,"data":{"subTitle":"可执行性(Executable)","content":"<h3>Stylus可执行代码</h3><p>正因有<code>stylus</code>可执行性，Stylus才能将自身转换成CSS.</p><pre><code>Usage: stylus [options] [command] [&lt; in [&gt; out]]\n              [file|dir ...]\n\nCommands:\n\n  help <prop>     Opens help info for <prop> in\n                  your default browser. (OS X only)\n\nOptions:\n\n  </prop></prop><span style=\"background-color: rgb(255, 255, 255); font-family: &quot;PingFang SC&quot;, Helvetica, &quot;Helvetica Neue&quot;, Tahoma, Arial, sans-serif;\">-u, --use &lt;path&gt;        Utilize the stylus plugin at &lt;path&gt;</span></code><p>  -i, --interactive       Start interactive REPL<br>  -w, --watch             Watch file(s) for changes and re-compile<br>  -o, --out &lt;dir&gt;         Output to &lt;dir&gt; when passing files<br>  -C, --css &lt;src&gt; [dest]  Convert CSS input to Stylus<br>  -I, --include &lt;path&gt;    Add &lt;path&gt; to lookup paths<br>  -c, --compress          Compress CSS output<br>  -d, --compare           Display input along with output<br>  -f, --firebug           Emits debug infos in the generated css that<br>                          can be used by the FireStylus Firebug plugin<br>  -l, --line-numbers      Emits comments in the generated CSS<br>                          indicating the corresponding Stylus line<br>  -V, --version           Display the version of Stylus<br>  -h, --help              Display help information</p><code><prop><prop><path><path><br></path></path></prop></prop></code></pre><h3>STDIO编译范例</h3><p><code>stylus</code>读取自<em>stdin</em>输出到<em>stdout</em>, 因此，如下例：</p><blockquote>$ stylus --compress &lt; some.styl &gt; some.css</blockquote><p>在终端机上尝试Stylus，书写下面的内容，然后为<code>__EOF__</code>按下<code>CTRL-D</code>：</p><pre><code>$ stylus\n body\n   color red\n   font 14px Arial, sans-serif</code></pre><h3>编译文件范例</h3><p><code>stylus</code>亦接受文件和目录。例如，一个目录名为<code>css</code>将在同一目录编译并输出<code>.css</code>文件。</p><blockquote>$ stylus css</blockquote><p>下面的将会输出到<code>./public/stylesheets</code>:</p><blockquote>$ stylus css --out public/stylesheets</blockquote><p>或一些文件：</p><blockquote>$ stylus one.styl two.styl</blockquote><p>为了开发的目的，你可以使用<code>linenos</code>选项发出指令在生成的CSS中显示Stylus文件名以及行数。</p><blockquote>$ stylus --line-numbers &lt;path&gt;</blockquote><p>或是<code>firebug</code>选项，如果你想使用firebug的<a href=\"http://github.com/LearnBoost/stylus/blob/master/docs/firebug.md\">FireStylus扩展</a>。</p><blockquote>$ stylus --firebug &lt;path&gt;</blockquote><h3>转换CSS</h3><p>如果你想把CSS转换成简洁的Stylus语法，可以使用<code>--css</code>标志。</p><p>通过标准输入输出：</p><blockquote>$ stylus --css &lt; test.css &gt; test.styl</blockquote><p>输出基本名一致的<code>.styl</code>文件。</p><blockquote>$ stylus --css test.css</blockquote><p>输出特定的目标：</p><blockquote>$ stylus --css test.css /tmp/out.styl</blockquote><h3>CSS属性的帮助</h3><p>在OS X上，<code>stylus help &lt;prop&gt;</code>会打开你默认浏览器并显示给定的<code>&lt;prop&gt;</code>属性的帮助文档。</p><blockquote>$ stylus help box-shadow</blockquote><h3>壳层交互(Interactive Shell)</h3><p>Stylus REPL (Read-Eval-Print-Loop)或“壳层交互(Interactive Shell)”允许你直接在终端机上把玩Stylus的表达式。</p><p>注意<span>只有表达式</span>可以生效，而不是选择器之类。为了简单，我们添加<code>-i</code>或<code>--interactive</code>标志：</p><pre><code>$ stylus -i\n&gt; color = white\n=&gt; #fff\n&gt; color - rgb(200,50,0)\n=&gt; #37cdff\n&gt; color\n=&gt; #fff\n&gt; color -= rgb(200,50,0)\n=&gt; #37cdff\n&gt; color\n=&gt; #37cdff\n&gt; rgba(color, 0.5)\n=&gt; rgba(55,205,255,0.5)</code></pre><h3>利用插件</h3><p>本例我们将使用<a href=\"https://github.com/visionmedia/nib\">nib</a>Stylus插件来说明它的CLI使用。</p><p>假设我们有如下的Stylus, 其导入nib并使用nib的<code>linear-gradient()</code>方法：</p><pre><code>@import 'nib'\n\nbody\n  background: linear-gradient(20px top, white, black)</code> </pre><p>我们是使用<code>stylus(1)</code>通过标准输入输出试图渲染的第一个东西可能就像下面这样：</p><blockquote>$ stylus &lt; test.styl</blockquote><p>这可能会生成如下的错误，因为Stylus不知道去哪里找到nib.</p><pre><code>Error: stdin:3\n    1| \n    2| \n  &gt; 3| @import 'nib'\n    4| \n    5| body\n    6|   background: linear-gradient(20px top, white, black)</code></pre><p>对于简单应用Stylus API们的插件，我们可以添加查找路径。通过使用<code>--include</code>或<code>-I</code>标志：</p><blockquote>$ stylus &lt; test.styl --include ../nib/lib</blockquote><p>现在生成内容如下。您可能注意到了，<code>gradient-data-uri()</code>以及<code>create-gradient-image()</code>以字面量形式输出了。这是因为，当插件提供JavaScript API的时候，光暴露插件的路径是不够的。但是，如果我们仅仅想要的是纯粹Stylus nib函数，则足够了。</p><pre><code>body {\n  background: url(gradient-data-uri(create-gradient-image(20px, top)));\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(1, #000));\n  background: -webkit-linear-gradient(top, #fff 0%, #000 100%);\n  background: -moz-linear-gradient(top, #fff 0%, #000 100%);\n  background: linear-gradient(top, #fff 0%, #000 100%);\n}</code></pre><p>因此，我们需要做的是使用<code>--use</code>或<code>-u</code>标志。其会找寻node模块（有或者没有<code>.js</code>扩展名）路径，这里的<code>require()</code>模块或调用<code>style.use(fn())</code>来暴露该插件（定义js函数等）。</p><blockquote>$ stylus &lt; test.styl --use ../nib/lib/nib</blockquote><p>生成为：</p><p><!--StartFragment--><!--EndFragment--></p><blockquote>body {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAUCAYAAABMDlehAAAABmJLR0QA/wD/AP+gvaeTAAAAI0lEQVQImWP4+fPnf6bPnz8zMH358oUBwkIjKJBgYGNj+w8Aphk4blt0EcMAAAAASUVORK5CYII=\");\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(1, #000));\n  background: -webkit-linear-gradient(top, #fff 0%, #000 100%);\n  background: -moz-linear-gradient(top, #fff 0%, #000 100%);\n  background: linear-gradient(top, #fff 0%, #000 100%);\n}</blockquote>"}}